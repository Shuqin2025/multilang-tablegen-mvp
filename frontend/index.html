<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MVP1 æŠ¥ä»· Demo</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 1em;
      }
      #scrape-box {
        margin-top: 2em;
        padding: 1em;
        border: 1px solid #ccc;
      }
      #scrape-box input {
        width: 60%;
        padding: 4px;
      }
      #scrape-result {
        margin-top: 1em;
        white-space: pre-wrap;
        font-size: 0.9em;
        background: #f8f8f8;
        padding: 0.5em;
        border: 1px solid #ddd;
      }
    </style>
  </head>
  <body>
    <h2>ç»“æ„åŒ–æŠ¥ä»·ï¼ˆMVP1ï¼‰</h2>
    <p>æœ¬é¡µé¢ä¿ç•™äº† MVP1 çš„ Excel å¯¼å‡ºåŠŸèƒ½ï¼Œå¹¶æ–°å¢ç½‘é¡µæŠ“å– Demoã€‚</p>

    <div id="scrape-box">
      <h3>ğŸŒ ç½‘é¡µæŠ“å– Demo (GET /v1/api/scrape)</h3>
      <input id="scrape-url" type="text" value="https://example.com" />
      <button id="scrape-btn">æŠ“å–</button>
      <div id="scrape-result"></div>
      <p>API åŸºå€ï¼š<code id="api-base-text"></code></p>
    </div>

    <script>
      // å›ºå®šåç«¯ API åŸºå€ï¼ˆä¸å†ä¾èµ– import.meta.envï¼‰
      const API_BASE = "https://yunivera-mvp2.onrender.com/v1/api";
      document.getElementById("api-base-text").textContent = API_BASE;

      const btn = document.getElementById("scrape-btn");
      const input = document.getElementById("scrape-url");
      const out = document.getElementById("scrape-result");

      btn.addEventListener("click", async () => {
        const rawUrl = input.value.trim();
        if (!rawUrl) {
          out.textContent = "âŒ è¯·è¾“å…¥ç½‘å€";
          return;
        }
        out.textContent = "â³ æŠ“å–ä¸­...";

        try {
          const res = await fetch(`${API_BASE}/scrape?url=${encodeURIComponent(rawUrl)}`);
          if (!res.ok) throw new Error("HTTP " + res.status);
          const data = await res.json();
          out.textContent =
            `Title: ${data.title}\næè¿°: ${data.description || "(æ— )"}\nH1: ${data.h1?.join(" | ") || "(æ— )"}\n` +
            `SKU: ${data.sku || "(æ— )"} | ä»·æ ¼: ${data.price || "(æ— )"} ${data.currency || ""} | MOQ: ${
              data.moq || "(æ— )"
            }\n\nå®Œæ•´æ•°æ®:\n` +
            JSON.stringify(data, null, 2);
        } catch (e) {
          out.textContent = "âŒ æŠ“å–å¤±è´¥: " + e.message;
        }
      });
    </script>
  </body>
</html>
